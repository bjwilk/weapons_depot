import{D as v,a as j}from"./chunk-B4FQDBC3-B7AjlB0U.js";import{M as b}from"./chunk-LHJ6JQGA-Cq8KF5Tr.js";import{g as _,a as g}from"./chunk-XFSJ7YIN-CYgS8ok5.js";import{S as y}from"./chunk-ADOCJB6L-CtbHuMEy.js";import{P as x}from"./chunk-P3UUX2T6-BjdsmG3m.js";import{b as d,i as C,K as N,r as S,j as t,W as w,a as D,aK as P,H as T,k as O}from"./index-Dd5AIRt1.js";import{R as E}from"./react-country-flag.esm-CUepnQuQ.js";import{c as F}from"./index-391Gg0Ss.js";import{u as k}from"./chunk-C76H5USB-DJZABeme.js";import{S as A}from"./chunk-UR2E444G-D2Lbw7mb.js";import"./chunk-3IW4HYUP-DD0tWyEL.js";import{u as H,D as R}from"./chunk-XVFA73MY-BMaVn9_N.js";import"./lodash-BSdnRVRc.js";import"./chunk-5AU4DI7M-Ck_cVJRv.js";import"./chunk-E3YGDIJC-DNIXVXp2.js";import{C as L}from"./container-ChTfB2gf.js";import"./format-BkG7sM8d.js";import"./chunk-FSMQADBD-DQ6u7KYm.js";import"./chunk-MWVM4TYO-bKUcYSnf.js";import"./Trans-CM9vMdxp.js";import"./x-mark-mini-BWMGrVIU.js";import"./chunk-YEDAFXMB-D7buONTO.js";import"./chunk-AOFGTNG6-CmvDtUlD.js";import"./chunk-WX2SMNCD-BJTVtiMv.js";import"./plus-mini-BwJJ7XIZ.js";import"./command-bar-D-8Acngt.js";import"./index-C70Cb1KD.js";import"./chunk-QAF7PVQE-UJeTHqTb.js";import"./date-picker-DpqbO765.js";import"./popover-D6P9NTCz.js";import"./triangle-left-mini-CZpnYzgZ.js";var q=({prefix:e,pageSize:a=20})=>{const n=k(["offset","q","created_at","updated_at","region_id","sales_channel_id","payment_status","fulfillment_status","order"],e),{offset:r,sales_channel_id:o,created_at:i,updated_at:s,fulfillment_status:l,payment_status:u,region_id:c,q:p,order:f}=n;return{searchParams:{limit:a,offset:r?Number(r):0,sales_channel_id:o==null?void 0:o.split(","),fulfillment_status:l==null?void 0:l.split(","),payment_status:u==null?void 0:u.split(","),created_at:i?JSON.parse(i):void 0,updated_at:s?JSON.parse(s):void 0,region_id:c==null?void 0:c.split(","),order:f||"-display_id",q:p},raw:n}},I=()=>{const{t:e}=d(),{regions:a}=C({limit:1e3,fields:"id,name"}),{sales_channels:n}=N({limit:1e3,fields:"id,name"});let r=[];if(a){const i={key:"region_id",label:e("fields.region"),type:"select",options:a.map(s=>({label:s.name,value:s.id})),multiple:!0,searchable:!0};r=[...r,i]}if(n){const i={key:"sales_channel_id",label:e("fields.salesChannel"),type:"select",multiple:!0,searchable:!0,options:n.map(s=>({label:s.name,value:s.id}))};r=[...r,i]}e("orders.payment.statusLabel"),e("orders.payment.status.notPaid"),e("orders.payment.status.awaiting"),e("orders.payment.status.captured"),e("orders.payment.status.refunded"),e("orders.payment.status.partiallyRefunded"),e("orders.payment.status.canceled"),e("orders.payment.status.requiresAction"),e("orders.fulfillment.statusLabel"),e("orders.fulfillment.status.notFulfilled"),e("orders.fulfillment.status.fulfilled"),e("orders.fulfillment.status.partiallyFulfilled"),e("orders.fulfillment.status.returned"),e("orders.fulfillment.status.partiallyReturned"),e("orders.fulfillment.status.shipped"),e("orders.fulfillment.status.partiallyShipped"),e("orders.fulfillment.status.canceled"),e("orders.fulfillment.status.requiresAction");const o=[{label:"Created At",key:"created_at"},{label:"Updated At",key:"updated_at"}].map(i=>({key:i.key,label:i.label,type:"date"}));return r=[...r,...o],r},z=({country:e})=>e?t.jsx("div",{className:"flex size-5 items-center justify-center",children:t.jsx(w,{content:e.display_name,children:t.jsx("div",{className:"flex size-4 items-center justify-center overflow-hidden rounded-sm",children:t.jsx(E,{countryCode:e.iso_2.toUpperCase(),svg:!0,style:{width:"16px",height:"16px"},"aria-label":e.display_name})})})}):t.jsx(x,{}),U=({customer:e})=>{if(!e)return t.jsx("span",{className:"text-ui-fg-muted",children:"-"});const{first_name:a,last_name:n,email:r}=e,o=[a,n].filter(Boolean).join(" ");return t.jsx("div",{className:"flex h-full w-full items-center",children:t.jsx("span",{className:"truncate",children:o||r})})},K=()=>{const{t:e}=d();return t.jsx("div",{className:"flex h-full w-full items-center",children:t.jsx("span",{className:"truncate",children:e("fields.customer")})})},M=({displayId:e})=>e?t.jsx("div",{className:"text-ui-fg-subtle txt-compact-small flex h-full w-full items-center overflow-hidden",children:t.jsxs("span",{className:"truncate",children:["#",e]})}):t.jsx(x,{}),$=()=>{const{t:e}=d();return t.jsx("div",{className:"flex h-full w-full items-center",children:t.jsx("span",{className:"truncate",children:e("fields.order")})})},B=({status:e})=>{const{t:a}=d();if(!e)return"-";const{label:n,color:r}=_(a,e);return t.jsx(y,{color:r,children:n})},J=()=>{const{t:e}=d();return t.jsx("div",{className:"flex h-full w-full items-center",children:t.jsx("span",{className:"truncate",children:e("fields.fulfillment")})})},Q=({status:e})=>{const{t:a}=d(),{label:n,color:r}=g(a,e);return t.jsx(y,{color:r,children:n})},W=()=>{const{t:e}=d();return t.jsx("div",{className:"flex h-full w-full items-center",children:t.jsx("span",{className:"truncate",children:e("fields.payment")})})},G=({channel:e})=>{if(!e)return t.jsx("span",{className:"text-ui-fg-muted",children:"-"});const{name:a}=e;return t.jsx("div",{className:"flex h-full w-full items-center overflow-hidden",children:t.jsx("span",{className:"truncate",children:a})})},Z=()=>{const{t:e}=d();return t.jsx("div",{className:"flex h-full w-full items-center",children:t.jsx("span",{className:"truncate",children:e("fields.salesChannel")})})},V=({currencyCode:e,total:a})=>a?t.jsx(b,{currencyCode:e,amount:a,align:"right"}):t.jsx(x,{}),X=()=>{const{t:e}=d();return t.jsx("div",{className:"flex h-full w-full items-center justify-end",children:t.jsx("span",{className:"truncate",children:e("fields.total")})})},m=F(),Y=e=>{const{exclude:a=[]}=e??{},n=S.useMemo(()=>[m.accessor("display_id",{header:()=>t.jsx($,{}),cell:({getValue:s})=>{const l=s();return t.jsx(M,{displayId:l})}}),m.accessor("created_at",{header:()=>t.jsx(v,{}),cell:({getValue:s})=>{const l=new Date(s());return t.jsx(j,{date:l})}}),m.accessor("customer",{header:()=>t.jsx(K,{}),cell:({getValue:s})=>{const l=s();return t.jsx(U,{customer:l})}}),m.accessor("sales_channel",{header:()=>t.jsx(Z,{}),cell:({getValue:s})=>{const l=s();return t.jsx(G,{channel:l})}}),m.accessor("payment_status",{header:()=>t.jsx(W,{}),cell:({getValue:s})=>{const l=s();return t.jsx(Q,{status:l})}}),m.accessor("fulfillment_status",{header:()=>t.jsx(J,{}),cell:({getValue:s})=>{const l=s();return t.jsx(B,{status:l})}}),m.accessor("total",{header:()=>t.jsx(X,{}),cell:({getValue:s,row:l})=>{const u=s(),c=l.original.currency_code;return t.jsx(V,{currencyCode:c,total:u})}}),m.display({id:"actions",cell:({row:s})=>{var u;const l=(u=s.original.shipping_address)==null?void 0:u.country;return t.jsx(z,{country:l})}})],[]),r=s=>s.accessorKey!==void 0,o=s=>s.id!==void 0,i=s=>r(s)?a.includes(s.accessorKey):o(s)?a.includes(s.id):!1;return n.filter(s=>!i(s))},ee=["id","status","created_at","email","display_id","payment_status","fulfillment_status","total","currency_code"],te=["*customer","*sales_channel"],se=`${ee.join(",")},${te.join(",")}`,h=20,le=()=>{const{t:e}=d(),{searchParams:a,raw:n}=q({pageSize:h}),{orders:r,count:o,isError:i,error:s,isLoading:l}=P({fields:se,...a},{placeholderData:O}),u=I(),c=Y({}),{table:p}=H({data:r??[],columns:c,enablePagination:!0,count:o,pageSize:h});if(i)throw s;return t.jsxs(L,{className:"divide-y p-0",children:[t.jsx("div",{className:"flex items-center justify-between px-6 py-4",children:t.jsx(T,{children:e("orders.domain")})}),t.jsx(R,{columns:c,table:p,pagination:!0,navigateTo:f=>`/orders/${f.original.id}`,filters:u,count:o,search:!0,isLoading:l,pageSize:h,orderBy:[{key:"display_id",label:e("orders.fields.displayId")},{key:"created_at",label:e("fields.createdAt")},{key:"updated_at",label:e("fields.updatedAt")}],queryObject:n,noRecords:{message:e("orders.list.noRecordsMessage")}})]})},Re=()=>{const{getWidgets:e}=D();return t.jsx(A,{widgets:{after:e("order.list.after"),before:e("order.list.before")},hasOutlet:!1,children:t.jsx(le,{})})};export{Re as Component};
