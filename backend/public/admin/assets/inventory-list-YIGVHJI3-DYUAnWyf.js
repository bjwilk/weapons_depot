import{j as s,O as v,b as p,d_ as x,H as b,T as g,B as k,L as j,r as _,b6 as N,e0 as w,A as q}from"./index-Dd5AIRt1.js";import{P as m}from"./chunk-P3UUX2T6-BjdsmG3m.js";import{u as S,D as T}from"./chunk-XVFA73MY-BMaVn9_N.js";import"./lodash-BSdnRVRc.js";import{u as I}from"./chunk-C76H5USB-DJZABeme.js";import"./chunk-5AU4DI7M-Ck_cVJRv.js";import"./chunk-E3YGDIJC-DNIXVXp2.js";import{P}from"./pencil-square-rz5ZnZ22.js";import{T as z}from"./trash-B_yspgao.js";import{u as C}from"./use-prompt-BS3ABRGp.js";import{C as O}from"./container-ChTfB2gf.js";import{c as L}from"./index-391Gg0Ss.js";import"./chunk-YEDAFXMB-D7buONTO.js";import"./chunk-AOFGTNG6-CmvDtUlD.js";import"./chunk-WX2SMNCD-BJTVtiMv.js";import"./plus-mini-BwJJ7XIZ.js";import"./command-bar-D-8Acngt.js";import"./index-C70Cb1KD.js";import"./chunk-QAF7PVQE-UJeTHqTb.js";import"./format-BkG7sM8d.js";import"./date-picker-DpqbO765.js";import"./popover-D6P9NTCz.js";import"./x-mark-mini-BWMGrVIU.js";import"./triangle-left-mini-CZpnYzgZ.js";import"./prompt-DruOcYql.js";var A=({item:e})=>{const{t:i}=p(),t=C(),{mutateAsync:l}=w(e.id),a=async()=>{await t({title:i("general.areYouSure"),description:i("inventory.deleteWarning"),confirmText:i("actions.delete"),cancelText:i("actions.cancel")})&&await l()};return s.jsx(q,{groups:[{actions:[{icon:s.jsx(P,{}),label:i("actions.edit"),to:`${e.id}/edit`}]},{actions:[{icon:s.jsx(z,{}),label:i("actions.delete"),onClick:a}]}]})},o=L(),D=()=>{const{t:e}=p();return _.useMemo(()=>[o.accessor("title",{header:e("fields.title"),cell:({getValue:i})=>{const t=i();return t?s.jsx("div",{className:"flex size-full items-center overflow-hidden",children:s.jsx("span",{className:"truncate",children:t})}):s.jsx(m,{})}}),o.accessor("sku",{header:e("fields.sku"),cell:({getValue:i})=>{const t=i();return t?s.jsx("div",{className:"flex size-full items-center overflow-hidden",children:s.jsx("span",{className:"truncate",children:t})}):s.jsx(m,{})}}),o.accessor("reserved_quantity",{header:e("inventory.reserved"),cell:({getValue:i})=>{const t=i();return Number.isNaN(t)?s.jsx(m,{}):s.jsx("div",{className:"flex size-full items-center overflow-hidden",children:s.jsx("span",{className:"truncate",children:t})})}}),o.accessor("stocked_quantity",{header:e("fields.inStock"),cell:({getValue:i})=>{const t=i();return Number.isNaN(t)?s.jsx(m,{}):s.jsx("div",{className:"flex size-full items-center overflow-hidden",children:s.jsx("span",{className:"truncate",children:t})})}}),o.display({id:"actions",cell:({row:i})=>s.jsx(A,{item:i.original})})],[e])},E=()=>{const{t:e}=p(),{stock_locations:i}=N({limit:1e3}),t=[];if(i){const l={type:"select",options:i.map(a=>({label:a.name,value:a.id})),key:"location_id",searchable:!0,label:e("fields.location")};t.push(l)}return t.push({type:"string",key:"material",label:e("fields.material")}),t.push({type:"string",key:"sku",label:e("fields.sku")}),t.push({type:"string",key:"mid_code",label:e("fields.midCode")}),t.push({type:"number",key:"height",label:e("fields.height")}),t.push({type:"number",key:"width",label:e("fields.width")}),t.push({type:"number",key:"length",label:e("fields.length")}),t.push({type:"number",key:"weight",label:e("fields.weight")}),t.push({type:"select",options:[{label:e("fields.true"),value:"true"},{label:e("fields.false"),value:"false"}],key:"requires_shipping",multiple:!1,label:e("fields.requiresShipping")}),t},J=({pageSize:e=20,prefix:i})=>{const t=I(["id","location_id","q","order","requires_shipping","offset","sku","origin_country","material","mid_code","hs_code","order","weight","width","length","height"],i),{offset:l,weight:a,width:n,length:c,height:d,requires_shipping:u,...r}=t;return{searchParams:{limit:e,offset:l?parseInt(l):void 0,weight:a?JSON.parse(a):void 0,width:n?JSON.parse(n):void 0,length:c?JSON.parse(c):void 0,height:d?JSON.parse(d):void 0,requires_shipping:u?JSON.parse(u):void 0,q:r.q,sku:r.sku,order:r.order,mid_code:r.mid_code,hs_code:r.hs_code,material:r.material,location_levels:{location_id:r.location_id||[]},id:r.id?r.id.split(","):void 0},raw:t}},f=20,H=()=>{const{t:e}=p(),{searchParams:i,raw:t}=J({pageSize:f}),{inventory_items:l,count:a,isPending:n,isError:c,error:d}=x({...i}),u=E(),r=D(),{table:y}=S({data:l??[],columns:r,count:a,enablePagination:!0,getRowId:h=>h.id,pageSize:f});if(c)throw d;return s.jsxs(O,{className:"divide-y p-0",children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[s.jsxs("div",{children:[s.jsx(b,{children:e("inventory.domain")}),s.jsx(g,{className:"text-ui-fg-subtle",size:"small",children:e("inventory.subtitle")})]}),s.jsx(k,{size:"small",variant:"secondary",asChild:!0,children:s.jsx(j,{to:"create",children:e("actions.create")})})]}),s.jsx(T,{table:y,columns:r,pageSize:f,count:a,isLoading:n,pagination:!0,search:!0,filters:u,queryObject:t,orderBy:[{key:"title",label:e("fields.title")},{key:"sku",label:e("fields.sku")},{key:"stocked_quantity",label:e("fields.inStock")},{key:"reserved_quantity",label:e("inventory.reserved")}],navigateTo:h=>`${h.id}`})]})},ue=()=>s.jsxs("div",{className:"flex flex-col gap-y-2",children:[s.jsx(H,{}),s.jsx(v,{})]});export{ue as Component};
